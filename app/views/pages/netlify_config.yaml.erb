backend:
  name: nih-gateway
  branch: <%= @target_branch %>
site_url: <%= root_url %>
logo_url: <%= image_path "oite_logo.jpg" %>
publish_mode: editorial_workflow
media_folder: public/images
public_folder: /images
collections:
  - name: page
    label: "Page"
    folder: "_pages/"
    create: true
    nested: {depth: 4}
    meta: {path: {widget: string, label: "Path", index_file: "index"}}
    fields:
      - {label: "Title", name: "title"}
      - {label: "Public", name: "public", widget: "boolean", default: true}
      - {label: "Expires At", name: "expires_at", widget: "datetime", default: "", required: false}
      - label: "Replaced By Page"
        name: "redirect_to"
        widget: "relation"
        required: false
        collection: "page"
        search_fields: ["title", "{{slug}}"]
        value_field: "{{slug}}"
        display_fields: ["title", "{{slug}}"]
      - {label: "Body", name: "body", widget: "markdown"}
      - name: footer
        label: Footer navigation
        widget: object
        collapsed: true
        fields:
          - name: visiblility
            widget: select
            options:
              - { label: "Show", value: "show" }
              - { label: "Hide", value: "hide" }
          - name: order
            widget: number
            hint: "Items with lower numbers are sorted before items with higher numbers."
            default: "100"

  - name: settings
    label: Site settings
    editor:
      preview: false

    files:
      - label: "Site footer"
        name: "footer"
        description: "Configure the footer at the bottom of every page."
        file: "_settings/footer.yml"
        fields:
          - name: agency_name
            label: Agency name
            widget: string
            required: false
          - name: agency_phone
            label: "Phone"
            required: false
            hint: "What number can people call with general questions?"
          - name: agency_email
            required: false
          <% (1..5).each do |num| %>
          - name: link<%= num %>
            label: "Link <%= num %>"
            widget: object
            collapsed: true
            fields:
              - name: url
                widget: string
                required: false
              - name: text
                widget: string
                required: false
          <% end %>
